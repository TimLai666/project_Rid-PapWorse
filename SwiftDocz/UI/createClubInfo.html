<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f7f7f7;
            margin: 0;
            height: 100vh;
        }

        .container {
            background-color: #fff;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            padding: 20px;
            min-width: 80%;
            /* max-width: 600px; */
        }

        .editor-container,
        #table-container,
        .radio-group {
            margin-bottom: 20px;
        }

        .file-input,
        .table-input,
        textarea,
        .image-input {
            min-width: 90%;
            padding: 8px;
            margin-top: 5px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        textarea {
            min-height: 200px;
        }

        .save-btn {
            width: 100%;
            background-color: #0056b3;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .save-btn:hover {
            background-color: #003d82;
        }

        .radio-group label {
            margin-right: 15px;
            font-size: 16px;
        }

        .radio-group input[type="radio"] {
            margin-right: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }

        textarea {
            height: 100px;
            /*Adjust the height of textarea*/
        }

        .custom-scrollbar {
            overflow-y: scroll;
            max-height: 600px;
            margin-bottom: 20px;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 12px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #888;
            border-radius: 20px;
            border: 3px solid #f1f1f1;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>

<body>
    <div id="navbar-placeholder" style="display: block;"></div>
    <script src="loadNavBar.js"></script>
    <div style="padding: 20px;
    height: 85vh;
    display: flex;
    justify-content: center;
    align-items: center;">
        <div class="container">
            <h2 style="text-align: center;">建立社團檔案</h2>
            <div class="custom-scrollbar" style="height: 400px;padding-right: 10px;">
                <div class="editor-container">
                </div>
                <div id="table-container"></div>
            </div>
            <button id="save-btn" class="save-btn">保存</button>
        </div>
    </div>
    <script type="text/javascript" src="/paling.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async function () {
            const saveButton = document.getElementById('save-btn');
            const tableContainer = document.getElementById('table-container');

            const inputFields = await paling.what_to_input('createClubInfo')();
            

            generateTableEditor(inputFields[0]);

            function generateTableEditor(fields) {
                const table = document.createElement('table');
                const tbody = document.createElement('tbody');
                table.appendChild(tbody);

                for (let fieldName in fields) {
                    const fieldType = fields[fieldName];
                    const tr = document.createElement('tr');
                    const tdLabel = document.createElement('td');
                    tdLabel.textContent = fieldName; // 这里可以替换为更友好的显示名称
                    const tdInput = document.createElement('td');
                    let input;

                    if (fieldType === 'textarea') {
                        input = document.createElement('textarea');
                    } else if (fieldType === 'file') {
                        input = document.createElement('input');
                        input.type = 'file';
                        input.accept = 'image/*';
                    } else {
                        input = document.createElement('input');
                        input.type = fieldType;
                    }

                    input.name = fieldName; // 使用 name 属性来标识输入字段
                    tdInput.appendChild(input);
                    tr.appendChild(tdLabel);
                    tr.appendChild(tdInput);

                    tbody.appendChild(tr);
                }

                tableContainer.innerHTML = '';
                tableContainer.appendChild(table);
            }

            saveButton.addEventListener('click', function () {
                const formData = {};
                // 使用 querySelectorAll 遍历每个带有 name 属性的输入元素
                document.querySelectorAll('[name]').forEach(input => {
                    const key = input.name; // 获取字段名
                    let value;
                    if (input.type === 'file') {
                        value = input.files.length > 0 ? input.files[0] : null; // 取第一个文件，如果没有文件则为 null
                    } else {
                        value = input.value; // 获取输入值
                    }
                    formData[key] = value; // 将值存储在 formData 对象中
                });

                console.log(formData); // 输出获取的数据
                // 在实际应用中，这里可以是其他处理，如验证数据或发送到服务器等。
            });
        });
    </script>
</body>

</html>